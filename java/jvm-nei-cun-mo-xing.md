# JVM内存模型

## 对象的创建

1. 检查类是否在常量池中有符号引用，并且是否已加载、解析和初始化过。
2. 为新生对象分配内存
3. 将对象的实例字段初始化为零值
4. 接下来，虚拟机要对对象进行必要的设置，例如这个对象是哪个类的实例、如何才能找到类的元数据信息、对象的哈希码、对象的GC分代年龄等信息。这些信息存放在对象的对象头（Object Header）之中。根据虚拟机当前的运行状态的不同，如是否启用偏向锁等，对象头会有不同的设置方式。关于对象头的具体内容，稍后再做详细介绍。
5. 调用构造方法完成初始化
6. 把内存地址赋值给引用实例

> 编译器可能会对字节码进行优化，也有可能进行CPU指令重排序，所以有可能在调用构造方法完成初始化之前，就把内存地址赋值给了引用示例，在多线程操作下就可能会造成线程安全问题。

## 对象的内存分布





